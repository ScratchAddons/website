---
layout: default
title: 404
description: Sorry! That page doesn't exist!
---

<h1>404</h1>

<div class="container">
	<h2>Sorry! That page doesn't exist!</h2>
	<p id='closest'></p>
	<p>Here are some things you can do:</p>
	<ul>
		<li><a href="https://github.com/ScratchAddons/website/issues">Create a new issue suggesting it</a></li>
		<li><a href="/">Return to the home page</a></li>
		<li><a href="https://findtheinvisiblecow.com/">Find the invisible cow</a></li>
	</ul>
</div>
<script>
	(async () => {// Function for load
	async function closest(str) {
		var parser, xmlDoc;
		var res = await fetch('https://scratchaddons.com/sitemap.xml')
		var text = await res.text()
		parser = new DOMParser();
		xmlDoc = parser.parseFromString(await text,"text/xml");
		//console.log(xmlDoc.getElementsByTagName("loc"))
		urls = []
		for (node of xmlDoc.getElementsByTagName("loc")) {
			text = node.childNodes[0].nodeValue.replace('https://scratchaddons.com','').replace('.html', '');
			urls.push(text)
		}
		urls.sort((a, b) => editDistance(a, str) - editDistance(str, b));
		return urls[0];
	}
	//Strip '.html' and leading '/'s from the pathname
	var url = window.location.pathname;
	url = url.replace('.html', '');
	url = url.replace(/\//, '');
	let closestVar = await closest(url)
  if(editDistance(closestVar, url) < 3) {
    window.location.href = `https://scratchaddons.com/${closest(url)}`;
  }
	var newurl = await closest(url);
	document.getElementById(
		'closest'
	).innerHTML = `Did you mean "<a href='${newurl}'>${newurl}</a>"?`;
	if (url === '404') {
		document.getElementById('closest').innerHTML =
			'Why would you purposely navigate to this page.';
	}
	// Functions
	
	async function editDistance(s1, s2) {
		s1 = (await s1).toLowerCase();
		s2 = s2.toLowerCase();

		var costs = new Array();
		for (var i = 0; i <= s1.length; i++) {
			var lastValue = i;
			for (var j = 0; j <= s2.length; j++) {
				if (i == 0) costs[j] = j;
				else {
					if (j > 0) {
						var newValue = costs[j - 1];
						if (s1.charAt(i - 1) != s2.charAt(j - 1))
							newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
						costs[j - 1] = lastValue;
						lastValue = newValue;
					}
				}
			}
			if (i > 0) costs[s2.length] = lastValue;
		}
		return costs[s2.length];
	}
})()
</script>
