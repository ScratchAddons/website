const waitForElement=e=>new Promise(t=>{if(document.querySelector(e))return t(document.querySelector(e));const o=new MutationObserver(()=>{document.querySelector(e)&&(t(document.querySelector(e)),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})}),stringToBoolean=e=>"false"!==e&&!!e;$(()=>{let e;switch(bowser.getParser(navigator.userAgent).parsedResult.engine.name){case"Blink":e="chrome";break;case"Gecko":e="firefox";break;default:e="unsupported"}const t={chrome:"https://chrome.google.com/webstore/detail/fbeffbjdlemaoicjdapfpikkikjoneco",firefox:"https://addons.mozilla.org/firefox/addon/scratch-messaging-extension/",unsupported:"/#install"}[e];if(document.querySelector("#install-intro")){switch(e){case"chrome":document.querySelector("#install-browser-icon").innerHTML='<span class="iconify" data-icon="simple-icons:googlechrome"></span>',document.querySelector("#install-browser").innerHTML="Install for Chrome";break;case"firefox":document.querySelector("#install-browser-icon").innerHTML='<span class="iconify" data-icon="simple-icons:firefoxbrowser"></span>',document.querySelector("#install-browser").innerHTML="Install for Firefox";break;default:document.querySelector("#install-browser-icon").innerHTML="",document.querySelector("#install-browser").innerHTML="Install"}document.querySelector("#install-intro").classList.toggle("disabled")}for(const o of document.querySelectorAll(".install-btn"))o.href=t,o.classList.add(`install-${e}`),"/"!==location.pathname&&"unsupported"!==e&&(o.target="_blank",o.rel="noopener")});let toggle,darkTheme=!1,extensionStyledTheme=!1,isUserSelected=!1;const updateExtensionStyledTheme=(e,t=!1)=>{e!==extensionStyledTheme&&(document.body.classList[e?"add":"remove"]("extension-styled"),extensionStyledTheme=e,t&&localStorage.setItem("extensionStyledTheme",e))},updateDarkTheme=(e,t=!1)=>{e!==darkTheme&&(document.body.classList.toggle("no-animation"),setTimeout(()=>document.body.classList.toggle("no-animation"),200),document.body.classList[e?"add":"remove"]("dark"),darkTheme=e,t&&localStorage.setItem("darkTheme",e))},updateDarkToggle=e=>{toggle!==undefined&&(toggle.innerHTML=e?'<span class="iconify" data-icon="fa-solid:sun" data-inline="false"></span>':'<span class="iconify" data-icon="fa-solid:moon" data-inline="false"></span>')};null!==localStorage.getItem("extensionStyledTheme")&&(updateDarkTheme(stringToBoolean(localStorage.getItem("extensionStyledTheme"))),isUserSelected=!0),null!==localStorage.getItem("darkTheme")&&(updateDarkTheme(stringToBoolean(localStorage.getItem("darkTheme"))),isUserSelected=!0),document.body.dataset.themeLoaded=!0,isUserSelected||(colorChangeListener=window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{isUserSelected||(updateDarkTheme(e.matches,!1),updateDarkToggle(darkTheme))})),waitForElement("#dark-toggle").then(()=>{toggle=document.querySelector("#dark-toggle"),updateDarkToggle(darkTheme),toggle.addEventListener("click",e=>{if(isUserSelected=!0,e&&e.ctrlKey)return localStorage.removeItem("darkTheme"),localStorage.removeItem("extensionStyledTheme"),void document.location.reload();updateDarkTheme(!darkTheme,!0),e&&e.shiftKey&&updateExtensionStyledTheme(!extensionStyledTheme,!0)})}),$(()=>{$(document.querySelectorAll('[data-toggle="tooltip"]')).tooltip()});let lastTooltipsAmount=0;const tooltipsObserver=new MutationObserver(()=>{currentTooltipsAmount=document.querySelectorAll('[data-toggle="tooltip"]').length,lastTooltipsAmount!==currentTooltipsAmount&&(lastTooltipsAmount=currentTooltipsAmount,$(document.querySelectorAll('[data-toggle="tooltip"]')).tooltip())});tooltipsObserver.observe(document.body,{childList:!0,subtree:!0}),$(()=>{document.querySelectorAll("main script[type='application/ld+json']").forEach(e=>{document.head.appendChild(e.cloneNode(!0)),e.remove()})}),$(()=>{console.log("Repository: https://github.com/ScratchAddons/website\nReport issues: https://github.com/ScratchAddons/website/issues or https://scratchaddons.com/feedback\n\n%cA little secret: You can toggle the similar style to the extension if you click the dark theme switch button while holding SHIFT.","font-style: italic; font-size: 0.75rem")});